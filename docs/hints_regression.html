<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Machine Learning â€“ Cancer &amp; Reddit</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-6bd9cfa162949bde0a231f530c97869d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Cancer &amp; Reddit</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./data_cleaning.html"> 
<span class="menu-text">Data Cleaning</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./eda_hints.html"> 
<span class="menu-text">HINTS EDA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./eda_reddit.html"> 
<span class="menu-text">Reddit EDA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./nlp.html"> 
<span class="menu-text">NLP</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./hints_regression.html" aria-current="page"> 
<span class="menu-text">Machine Learning</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./summary.html"> 
<span class="menu-text">Summary</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#hints-prepartion-of-data" id="toc-hints-prepartion-of-data" class="nav-link active" data-scroll-target="#hints-prepartion-of-data">HINTS Prepartion of Data</a></li>
  <li><a href="#hints-spearman-correlation" id="toc-hints-spearman-correlation" class="nav-link" data-scroll-target="#hints-spearman-correlation">HINTS | Spearman Correlation</a></li>
  <li><a href="#hints-ordinal-regression" id="toc-hints-ordinal-regression" class="nav-link" data-scroll-target="#hints-ordinal-regression">HINTS | Ordinal Regression</a></li>
  <li><a href="#hints-random-forest-classifier" id="toc-hints-random-forest-classifier" class="nav-link" data-scroll-target="#hints-random-forest-classifier">HINTS | Random Forest Classifier</a>
  <ul class="collapse">
  <li><a href="#addressing-class-imbalance" id="toc-addressing-class-imbalance" class="nav-link" data-scroll-target="#addressing-class-imbalance">Addressing Class Imbalance</a></li>
  <li><a href="#hyperparameter-tuning" id="toc-hyperparameter-tuning" class="nav-link" data-scroll-target="#hyperparameter-tuning">Hyperparameter tuning</a></li>
  <li><a href="#random-forest-model-comparison" id="toc-random-forest-model-comparison" class="nav-link" data-scroll-target="#random-forest-model-comparison">Random Forest Model Comparison</a></li>
  <li><a href="#takeaways-from-random-forest-models" id="toc-takeaways-from-random-forest-models" class="nav-link" data-scroll-target="#takeaways-from-random-forest-models">Takeaways from Random Forest Models</a></li>
  </ul></li>
  <li><a href="#hints-xgboost" id="toc-hints-xgboost" class="nav-link" data-scroll-target="#hints-xgboost">HINTS | XGBoost</a>
  <ul class="collapse">
  <li><a href="#big-chunk" id="toc-big-chunk" class="nav-link" data-scroll-target="#big-chunk">Big Chunk</a></li>
  </ul></li>
  <li><a href="#hints-conclusion-comparing-random-forest-and-xgboost" id="toc-hints-conclusion-comparing-random-forest-and-xgboost" class="nav-link" data-scroll-target="#hints-conclusion-comparing-random-forest-and-xgboost">HINTS | Conclusion: Comparing Random Forest and XGBoost</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Machine Learning</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div id="11190f43" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pyreadr</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> display</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestRegressor</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error, r2_score</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score, classification_report</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> product</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="hints-prepartion-of-data" class="level2">
<h2 class="anchored" data-anchor-id="hints-prepartion-of-data">HINTS Prepartion of Data</h2>
<div id="f6965b51" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>file_path <span class="op">=</span> <span class="st">'../data/csv/hints_cleaned_forML_spearman.csv'</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>hints_cleaned <span class="op">=</span> pd.read_csv(file_path)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows in a neat table format</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>display(hints_cleaned.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">HHID</th>
<th data-quarto-table-cell-role="th">SeekCancerInfo</th>
<th data-quarto-table-cell-role="th">CancerFrustrated</th>
<th data-quarto-table-cell-role="th">CancerTrustDoctor</th>
<th data-quarto-table-cell-role="th">CancerTrustFamily</th>
<th data-quarto-table-cell-role="th">CancerTrustGov</th>
<th data-quarto-table-cell-role="th">CancerTrustCharities</th>
<th data-quarto-table-cell-role="th">CancerTrustReligiousOrgs</th>
<th data-quarto-table-cell-role="th">CancerTrustScientists</th>
<th data-quarto-table-cell-role="th">Electronic2_HealthInfo</th>
<th data-quarto-table-cell-role="th">MisleadingHealthInfo</th>
<th data-quarto-table-cell-role="th">TrustHCSystem</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>21000330</td>
<td>Yes</td>
<td>Somewhat disagree</td>
<td>Some</td>
<td>Not at all</td>
<td>Some</td>
<td>Some</td>
<td>Not at all</td>
<td>A lot</td>
<td>Yes</td>
<td>A lot</td>
<td>A little</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>21000976</td>
<td>Yes</td>
<td>Somewhat agree</td>
<td>A lot</td>
<td>Some</td>
<td>Some</td>
<td>Some</td>
<td>Some</td>
<td>A lot</td>
<td>Yes</td>
<td>Some</td>
<td>A little</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>21001112</td>
<td>Yes</td>
<td>Somewhat disagree</td>
<td>A little</td>
<td>A little</td>
<td>Not at all</td>
<td>Not at all</td>
<td>Not at all</td>
<td>A little</td>
<td>No</td>
<td>A lot</td>
<td>Not at all</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>21001283</td>
<td>Yes</td>
<td>Somewhat disagree</td>
<td>A lot</td>
<td>Some</td>
<td>Not at all</td>
<td>A little</td>
<td>Some</td>
<td>Not at all</td>
<td>No</td>
<td>I do not use social media</td>
<td>Not at all</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>21001548</td>
<td>Yes</td>
<td>Strongly agree</td>
<td>A lot</td>
<td>Some</td>
<td>Not at all</td>
<td>Some</td>
<td>A lot</td>
<td>A little</td>
<td>Yes</td>
<td>Some</td>
<td>A little</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="d08c169a" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of NA or NaN values in each column</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>na_count <span class="op">=</span> hints_cleaned.isna().<span class="bu">sum</span>()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"NA values count per column:"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(na_count)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(hints_cleaned.shape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>NA values count per column:
HHID                        0
SeekCancerInfo              0
CancerFrustrated            0
CancerTrustDoctor           0
CancerTrustFamily           0
CancerTrustGov              0
CancerTrustCharities        0
CancerTrustReligiousOrgs    0
CancerTrustScientists       0
Electronic2_HealthInfo      0
MisleadingHealthInfo        3
TrustHCSystem               0
dtype: int64
(323, 12)</code></pre>
</div>
</div>
<div id="5840abbe" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>hints_cleaned_cleaned <span class="op">=</span> hints_cleaned.dropna()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="2c0bb4a6" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the mappings</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>trust_mapping <span class="op">=</span> {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Not at all"</span>: <span class="dv">4</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"A little"</span>: <span class="dv">3</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Some"</span>: <span class="dv">2</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"A lot"</span>: <span class="dv">1</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>agreement_mapping <span class="op">=</span> {</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Strongly agree"</span>: <span class="dv">1</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Somewhat agree"</span>: <span class="dv">2</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Somewhat disagree"</span>: <span class="dv">3</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Strongly disagree"</span>: <span class="dv">4</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>binary_mapping <span class="op">=</span> {</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Yes"</span>: <span class="dv">1</span>,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"No"</span>: <span class="dv">2</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>misleading_info_mapping <span class="op">=</span> {</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"I do not use social media"</span>: <span class="dv">5</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"None"</span>: <span class="dv">4</span>,</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"A little"</span>: <span class="dv">3</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Some"</span>: <span class="dv">2</span>,</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"A lot"</span>: <span class="dv">1</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the mappings to the respective columns</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>mapped_columns <span class="op">=</span> {</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CancerFrustrated"</span>: agreement_mapping,</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CancerTrustDoctor"</span>: trust_mapping,</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CancerTrustFamily"</span>: trust_mapping,</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CancerTrustGov"</span>: trust_mapping,</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CancerTrustCharities"</span>: trust_mapping,</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CancerTrustReligiousOrgs"</span>: trust_mapping,</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CancerTrustScientists"</span>: trust_mapping,</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TrustHCSystem"</span>: trust_mapping,</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Electronic2_HealthInfo"</span>: binary_mapping,</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MisleadingHealthInfo"</span>: misleading_info_mapping,</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SeekCancerInfo"</span>: binary_mapping </span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply mappings to the filtered DataFrame</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column, mapping <span class="kw">in</span> mapped_columns.items():</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>    hints_cleaned[column] <span class="op">=</span> hints_cleaned[column].<span class="bu">map</span>(mapping)</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop rows where 'MisleadingHealthInfo' is NaN</span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>hints_cleaned <span class="op">=</span> hints_cleaned.dropna(subset<span class="op">=</span>[<span class="st">'MisleadingHealthInfo'</span>])</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 'MisleadingHealthInfo' to integer type</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>hints_cleaned[<span class="st">'MisleadingHealthInfo'</span>] <span class="op">=</span> hints_cleaned[<span class="st">'MisleadingHealthInfo'</span>].astype(<span class="bu">int</span>)</span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a><span class="co"># # Display the updated DataFrame and its data type</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a><span class="co"># print(hints_cleaned.head())</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a><span class="co"># print(hints_cleaned['MisleadingHealthInfo'].dtype)</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the transformed dataset</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Data after applying mappings to numeric values:"</span>)</span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>hints_cleaned <span class="op">=</span> hints_cleaned.drop(columns<span class="op">=</span>[<span class="st">'HHID'</span>]) <span class="co"># Drop the 'HHID' column</span></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>display(hints_cleaned.head())</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(hints_cleaned.dtypes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Data after applying mappings to numeric values:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">SeekCancerInfo</th>
<th data-quarto-table-cell-role="th">CancerFrustrated</th>
<th data-quarto-table-cell-role="th">CancerTrustDoctor</th>
<th data-quarto-table-cell-role="th">CancerTrustFamily</th>
<th data-quarto-table-cell-role="th">CancerTrustGov</th>
<th data-quarto-table-cell-role="th">CancerTrustCharities</th>
<th data-quarto-table-cell-role="th">CancerTrustReligiousOrgs</th>
<th data-quarto-table-cell-role="th">CancerTrustScientists</th>
<th data-quarto-table-cell-role="th">Electronic2_HealthInfo</th>
<th data-quarto-table-cell-role="th">MisleadingHealthInfo</th>
<th data-quarto-table-cell-role="th">TrustHCSystem</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>3</td>
<td>2</td>
<td>4</td>
<td>2</td>
<td>2</td>
<td>4</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>4</td>
<td>2</td>
<td>5</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>2</td>
<td>1</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>SeekCancerInfo              int64
CancerFrustrated            int64
CancerTrustDoctor           int64
CancerTrustFamily           int64
CancerTrustGov              int64
CancerTrustCharities        int64
CancerTrustReligiousOrgs    int64
CancerTrustScientists       int64
Electronic2_HealthInfo      int64
MisleadingHealthInfo        int64
TrustHCSystem               int64
dtype: object</code></pre>
</div>
</div>
</section>
<section id="hints-spearman-correlation" class="level1">
<h1>HINTS | Spearman Correlation</h1>
<div id="1368a4fa" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop the 'SeekCancerInfo' column from hints_cleaned</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>hints_cleaned <span class="op">=</span> hints_cleaned.drop([<span class="st">'SeekCancerInfo'</span>], axis<span class="op">=</span><span class="dv">1</span>, errors<span class="op">=</span><span class="st">'ignore'</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize the data (exclude non-numeric columns)</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> StandardScaler()</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>standardized_data <span class="op">=</span> pd.DataFrame(</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    scaler.fit_transform(hints_cleaned.select_dtypes(include<span class="op">=</span><span class="st">'number'</span>)),</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>hints_cleaned.select_dtypes(include<span class="op">=</span><span class="st">'number'</span>).columns</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Define target variable</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>target_variable <span class="op">=</span> <span class="st">'TrustHCSystem'</span>  <span class="co"># Replace with your actual target column name</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> target_variable <span class="kw">not</span> <span class="kw">in</span> standardized_data.columns:</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="ss">f"Target variable '</span><span class="sc">{</span>target_variable<span class="sc">}</span><span class="ss">' not found in the dataset."</span>)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute Spearman correlation matrix (use 'spearman' instead of 'pearson')</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>correlation_matrix_spearman <span class="op">=</span> standardized_data.corr(method<span class="op">=</span><span class="st">'spearman'</span>)</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename the DataFrame to correlation_data</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>correlation_data <span class="op">=</span> correlation_matrix_spearman</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the full Spearman correlation matrix</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Spearman Correlation Matrix (excluding SeekCancerInfo and after standardization):"</span>)</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>display(correlation_data)</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Focus on the correlation of the target variable with other features</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>correlation_with_target_spearman <span class="op">=</span> correlation_data[target_variable].sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Spearman correlation of features with </span><span class="sc">{</span>target_variable<span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>display(correlation_with_target_spearman)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Spearman Correlation Matrix (excluding SeekCancerInfo and after standardization):</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">CancerFrustrated</th>
<th data-quarto-table-cell-role="th">CancerTrustDoctor</th>
<th data-quarto-table-cell-role="th">CancerTrustFamily</th>
<th data-quarto-table-cell-role="th">CancerTrustGov</th>
<th data-quarto-table-cell-role="th">CancerTrustCharities</th>
<th data-quarto-table-cell-role="th">CancerTrustReligiousOrgs</th>
<th data-quarto-table-cell-role="th">CancerTrustScientists</th>
<th data-quarto-table-cell-role="th">Electronic2_HealthInfo</th>
<th data-quarto-table-cell-role="th">MisleadingHealthInfo</th>
<th data-quarto-table-cell-role="th">TrustHCSystem</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">CancerFrustrated</td>
<td>1.000000</td>
<td>-0.113323</td>
<td>-0.016362</td>
<td>-0.080702</td>
<td>-0.031535</td>
<td>0.060668</td>
<td>-0.137560</td>
<td>-0.032814</td>
<td>0.106177</td>
<td>0.009057</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">CancerTrustDoctor</td>
<td>-0.113323</td>
<td>1.000000</td>
<td>0.169792</td>
<td>0.339147</td>
<td>0.216578</td>
<td>0.055089</td>
<td>0.389370</td>
<td>-0.024240</td>
<td>-0.043955</td>
<td>0.208823</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">CancerTrustFamily</td>
<td>-0.016362</td>
<td>0.169792</td>
<td>1.000000</td>
<td>0.056990</td>
<td>0.191268</td>
<td>0.152417</td>
<td>0.031445</td>
<td>0.055179</td>
<td>-0.114691</td>
<td>0.009511</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">CancerTrustGov</td>
<td>-0.080702</td>
<td>0.339147</td>
<td>0.056990</td>
<td>1.000000</td>
<td>0.451163</td>
<td>0.018918</td>
<td>0.511625</td>
<td>0.066727</td>
<td>-0.169206</td>
<td>0.255777</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">CancerTrustCharities</td>
<td>-0.031535</td>
<td>0.216578</td>
<td>0.191268</td>
<td>0.451163</td>
<td>1.000000</td>
<td>0.375474</td>
<td>0.260381</td>
<td>0.017640</td>
<td>-0.149720</td>
<td>0.182940</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">CancerTrustReligiousOrgs</td>
<td>0.060668</td>
<td>0.055089</td>
<td>0.152417</td>
<td>0.018918</td>
<td>0.375474</td>
<td>1.000000</td>
<td>-0.193320</td>
<td>-0.142820</td>
<td>-0.213957</td>
<td>0.078283</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">CancerTrustScientists</td>
<td>-0.137560</td>
<td>0.389370</td>
<td>0.031445</td>
<td>0.511625</td>
<td>0.260381</td>
<td>-0.193320</td>
<td>1.000000</td>
<td>0.146038</td>
<td>-0.058539</td>
<td>0.200051</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Electronic2_HealthInfo</td>
<td>-0.032814</td>
<td>-0.024240</td>
<td>0.055179</td>
<td>0.066727</td>
<td>0.017640</td>
<td>-0.142820</td>
<td>0.146038</td>
<td>1.000000</td>
<td>0.041391</td>
<td>0.062666</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">MisleadingHealthInfo</td>
<td>0.106177</td>
<td>-0.043955</td>
<td>-0.114691</td>
<td>-0.169206</td>
<td>-0.149720</td>
<td>-0.213957</td>
<td>-0.058539</td>
<td>0.041391</td>
<td>1.000000</td>
<td>-0.061407</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">TrustHCSystem</td>
<td>0.009057</td>
<td>0.208823</td>
<td>0.009511</td>
<td>0.255777</td>
<td>0.182940</td>
<td>0.078283</td>
<td>0.200051</td>
<td>0.062666</td>
<td>-0.061407</td>
<td>1.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Spearman correlation of features with TrustHCSystem:</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>TrustHCSystem               1.000000
CancerTrustGov              0.255777
CancerTrustDoctor           0.208823
CancerTrustScientists       0.200051
CancerTrustCharities        0.182940
CancerTrustReligiousOrgs    0.078283
Electronic2_HealthInfo      0.062666
CancerTrustFamily           0.009511
CancerFrustrated            0.009057
MisleadingHealthInfo       -0.061407
Name: TrustHCSystem, dtype: float64</code></pre>
</div>
</div>
<div id="b6773170" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Heat Map of Spearman Correlation</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Mask the upper triangle of the matrix for better visualization</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> np.triu(np.ones_like(correlation_matrix_spearman, dtype<span class="op">=</span><span class="bu">bool</span>))</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the heatmap</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>sns.heatmap(</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    correlation_matrix_spearman,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    mask<span class="op">=</span>mask,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    annot<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    fmt<span class="op">=</span><span class="st">".2f"</span>,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    cmap<span class="op">=</span><span class="st">"coolwarm"</span>,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    cbar<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    square<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    xticklabels<span class="op">=</span>correlation_matrix_spearman.columns,</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    yticklabels<span class="op">=</span>correlation_matrix_spearman.columns</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Spearman Correlation Matrix (Ordinal Data)"</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hints_regression_files/figure-html/cell-8-output-1.png" width="867" height="757" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="4a3981dc" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>correlation_data.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">CancerFrustrated</th>
<th data-quarto-table-cell-role="th">CancerTrustDoctor</th>
<th data-quarto-table-cell-role="th">CancerTrustFamily</th>
<th data-quarto-table-cell-role="th">CancerTrustGov</th>
<th data-quarto-table-cell-role="th">CancerTrustCharities</th>
<th data-quarto-table-cell-role="th">CancerTrustReligiousOrgs</th>
<th data-quarto-table-cell-role="th">CancerTrustScientists</th>
<th data-quarto-table-cell-role="th">Electronic2_HealthInfo</th>
<th data-quarto-table-cell-role="th">MisleadingHealthInfo</th>
<th data-quarto-table-cell-role="th">TrustHCSystem</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">CancerFrustrated</td>
<td>1.000000</td>
<td>-0.113323</td>
<td>-0.016362</td>
<td>-0.080702</td>
<td>-0.031535</td>
<td>0.060668</td>
<td>-0.137560</td>
<td>-0.032814</td>
<td>0.106177</td>
<td>0.009057</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">CancerTrustDoctor</td>
<td>-0.113323</td>
<td>1.000000</td>
<td>0.169792</td>
<td>0.339147</td>
<td>0.216578</td>
<td>0.055089</td>
<td>0.389370</td>
<td>-0.024240</td>
<td>-0.043955</td>
<td>0.208823</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">CancerTrustFamily</td>
<td>-0.016362</td>
<td>0.169792</td>
<td>1.000000</td>
<td>0.056990</td>
<td>0.191268</td>
<td>0.152417</td>
<td>0.031445</td>
<td>0.055179</td>
<td>-0.114691</td>
<td>0.009511</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">CancerTrustGov</td>
<td>-0.080702</td>
<td>0.339147</td>
<td>0.056990</td>
<td>1.000000</td>
<td>0.451163</td>
<td>0.018918</td>
<td>0.511625</td>
<td>0.066727</td>
<td>-0.169206</td>
<td>0.255777</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">CancerTrustCharities</td>
<td>-0.031535</td>
<td>0.216578</td>
<td>0.191268</td>
<td>0.451163</td>
<td>1.000000</td>
<td>0.375474</td>
<td>0.260381</td>
<td>0.017640</td>
<td>-0.149720</td>
<td>0.182940</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="hints-ordinal-regression" class="level1">
<h1>HINTS | Ordinal Regression</h1>
<div id="efec48e0" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert all numeric columns to integers</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>numeric_columns <span class="op">=</span> hints_cleaned.select_dtypes(include<span class="op">=</span><span class="st">'number'</span>).columns</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>hints_cleaned[numeric_columns] <span class="op">=</span> hints_cleaned[numeric_columns].astype(<span class="bu">int</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="1806a1f4" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop the 'SeekCancerInfo' column from hints_cleaned</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>hints_cleaned <span class="op">=</span> hints_cleaned.drop([<span class="st">'SeekCancerInfo'</span>], axis<span class="op">=</span><span class="dv">1</span>, errors<span class="op">=</span><span class="st">'ignore'</span>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Handle missing values (you can drop rows or impute)</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>hints_cleaned <span class="op">=</span> hints_cleaned.dropna()  <span class="co"># This will drop rows with missing values</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize the numeric data (features)</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> StandardScaler()</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>standardized_data <span class="op">=</span> pd.DataFrame(</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    scaler.fit_transform(hints_cleaned.select_dtypes(include<span class="op">=</span><span class="st">'number'</span>)),</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>hints_cleaned.select_dtypes(include<span class="op">=</span><span class="st">'number'</span>).columns</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Define target variable</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>target_variable <span class="op">=</span> <span class="st">'TrustHCSystem'</span>  <span class="co"># Replace with your actual target column name</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure that the target variable is in the same format (ordinal) and handle missing data</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> hints_cleaned[target_variable]</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Define X (independent variables) by excluding the target variable</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> standardized_data.drop(columns<span class="op">=</span>[target_variable], errors<span class="op">=</span><span class="st">'ignore'</span>)</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the Ordinal Regression Model using Statsmodels</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.miscmodels.ordinal_model <span class="im">import</span> OrderedModel</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the model using numpy arrays</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> OrderedModel(y.to_numpy(), X.to_numpy(), distr<span class="op">=</span><span class="st">"logit"</span>)  <span class="co"># Use 'logit' link function</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> model.fit()</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the model summary</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result.summary())</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Limiting prediction output</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict probabilities and expected values</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> result.predict(X.to_numpy())</span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Print only the first few predictions</span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">5</span>  <span class="co"># Number of predictions to show</span></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"First"</span>, N, <span class="st">"predictions:"</span>, y_pred[:N])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                             OrderedModel Results                             
==============================================================================
Dep. Variable:                      y   Log-Likelihood:                -150.54
Model:                   OrderedModel   AIC:                             321.1
Method:            Maximum Likelihood   BIC:                             358.8
Date:                Sun, 08 Dec 2024                                         
Time:                        17:34:21                                         
No. Observations:                 320                                         
Df Residuals:                     310                                         
Df Model:                           9                                         
==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
x1            -0.1509      0.146     -1.035      0.301      -0.437       0.135
x2             0.2612      0.153      1.711      0.087      -0.038       0.560
x3            -0.2393      0.148     -1.615      0.106      -0.530       0.051
x4             0.3240      0.190      1.703      0.089      -0.049       0.697
x5             0.0390      0.188      0.207      0.836      -0.329       0.407
x6             0.1025      0.174      0.590      0.555      -0.238       0.443
x7             0.0621      0.175      0.355      0.722      -0.280       0.405
x8            -0.0426      0.154     -0.277      0.782      -0.344       0.259
x9            -0.1870      0.163     -1.147      0.251      -0.507       0.133
3/4            1.4986      0.153      9.788      0.000       1.198       1.799
==============================================================================
First 5 predictions: [[0.87193064 0.12806936]
 [0.86912051 0.13087949]
 [0.6281898  0.3718102 ]
 [0.86116233 0.13883767]
 [0.74460087 0.25539913]]</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/elizabethkovalchuk/Documents/dev_environments/miniforge3/lib/python3.12/site-packages/statsmodels/base/optimizer.py:737: RuntimeWarning: Maximum number of iterations has been exceeded.
  retvals = optimize.fmin(f, start_params, args=fargs, xtol=xtol,
/Users/elizabethkovalchuk/Documents/dev_environments/miniforge3/lib/python3.12/site-packages/statsmodels/base/model.py:607: ConvergenceWarning: Maximum Likelihood optimization failed to converge. Check mle_retvals
  warnings.warn("Maximum Likelihood optimization failed to "</code></pre>
</div>
</div>
<p>AIC is a measure of the relative quality of the model; lower values of AIC indicate a better fit of the model to the data. With an AIC of 336.5, the model doesnâ€™t appear to be fitting well, similar with the BIC score. BIC is similar to AIC, but it penalizes models with more parameters. Like AIC, lower values of BIC indicate a better-fitting model. Here, it is 374.3 - time to move on to other model types.</p>
</section>
<section id="hints-random-forest-classifier" class="level1">
<h1>HINTS | Random Forest Classifier</h1>
<div id="1d4265b8" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestClassifier</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report, accuracy_score</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># hints_cleaned = hints_cleaned.drop(columns=['HHID'])</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming hints_cleaned is your cleaned DataFrame</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the features (X) and target variable (y)</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> hints_cleaned.drop(columns<span class="op">=</span>[<span class="st">'TrustHCSystem'</span>])  <span class="co"># Replace 'TrustHCSystem' with your target column</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> hints_cleaned[<span class="st">'TrustHCSystem'</span>]  <span class="co"># Your target variable</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the data into training and testing sets (80% train, 20% test)</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Random Forest Classifier</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>rf_initial <span class="op">=</span> RandomForestClassifier(random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model on the training data</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>rf_initial.fit(X_train, y_train)</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict on the testing data</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>y_pred_initial <span class="op">=</span> rf_initial.predict(X_test)</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Print classification report and accuracy</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Initial Random Forest Model:"</span>)</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Accuracy:"</span>, accuracy_score(y_test, y_pred_initial))</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Classification Report:</span><span class="ch">\n</span><span class="st">"</span>, classification_report(y_test, y_pred_initial))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Initial Random Forest Model:
Accuracy: 0.75

Classification Report:
               precision    recall  f1-score   support

           3       0.78      0.94      0.85        49
           4       0.40      0.13      0.20        15

    accuracy                           0.75        64
   macro avg       0.59      0.54      0.53        64
weighted avg       0.69      0.75      0.70        64
</code></pre>
</div>
</div>
<div id="0495a642" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Address Class Imbalance to improve model </span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> imblearn.over_sampling <span class="im">import</span> SMOTE</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Oversample the training data</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>smote <span class="op">=</span> SMOTE(random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>X_resampled, y_resampled <span class="op">=</span> smote.fit_resample(X_train, y_train)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the Random Forest model on resampled data</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>rf_resampled <span class="op">=</span> RandomForestClassifier(random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>rf_resampled.fit(X_resampled, y_resampled)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict and evaluate</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>y_pred_resampled <span class="op">=</span> rf_resampled.predict(X_test)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Print classification report and accuracy</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Random Forest Model After Addressing Class Imbalance:"</span>)</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Accuracy:"</span>, accuracy_score(y_test, y_pred_resampled))</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Classification Report:</span><span class="ch">\n</span><span class="st">"</span>, classification_report(y_test, y_pred_resampled))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Random Forest Model After Addressing Class Imbalance:
Accuracy: 0.609375

Classification Report:
               precision    recall  f1-score   support

           3       0.76      0.71      0.74        49
           4       0.22      0.27      0.24        15

    accuracy                           0.61        64
   macro avg       0.49      0.49      0.49        64
weighted avg       0.63      0.61      0.62        64
</code></pre>
</div>
</div>
<section id="addressing-class-imbalance" class="level3">
<h3 class="anchored" data-anchor-id="addressing-class-imbalance">Addressing Class Imbalance</h3>
<div id="b70023e8" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Shape of X_resampled:"</span>, X_resampled.shape)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Shape of y_resampled:"</span>, y_resampled.shape)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"X_resampled Preview:"</span>)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(X_resampled.head())</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"y_resampled Preview:"</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(y_resampled.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Shape of X_resampled: (412, 9)
Shape of y_resampled: (412,)
X_resampled Preview:
   CancerFrustrated  CancerTrustDoctor  CancerTrustFamily  CancerTrustGov  \
0                 4                  2                  3               4   
1                 2                  1                  2               1   
2                 2                  2                  3               3   
3                 2                  1                  3               1   
4                 3                  2                  3               2   

   CancerTrustCharities  CancerTrustReligiousOrgs  CancerTrustScientists  \
0                     3                         4                      2   
1                     2                         3                      1   
2                     2                         3                      2   
3                     1                         3                      1   
4                     4                         4                      1   

   Electronic2_HealthInfo  MisleadingHealthInfo  
0                       1                     1  
1                       2                     3  
2                       1                     2  
3                       1                     2  
4                       1                     1  
y_resampled Preview:
0    3
1    3
2    3
3    3
4    3
Name: TrustHCSystem, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="hyperparameter-tuning" class="level3">
<h3 class="anchored" data-anchor-id="hyperparameter-tuning">Hyperparameter tuning</h3>
<div id="b714b859" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Manual Hyperparameter tuning </span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the hyperparameter grid</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>param_grid <span class="op">=</span> {</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"n_estimators"</span>: [<span class="dv">50</span>, <span class="dv">100</span>, <span class="dv">200</span>],</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"max_depth"</span>: [<span class="va">None</span>, <span class="dv">10</span>, <span class="dv">20</span>],</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"min_samples_split"</span>: [<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">10</span>],</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"min_samples_leaf"</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>],</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate all combinations of hyperparameters</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>param_combinations <span class="op">=</span> <span class="bu">list</span>(product(</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    param_grid[<span class="st">"n_estimators"</span>],</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    param_grid[<span class="st">"max_depth"</span>],</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    param_grid[<span class="st">"min_samples_split"</span>],</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    param_grid[<span class="st">"min_samples_leaf"</span>]</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize variables to store the best model</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>best_score <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>best_params <span class="op">=</span> <span class="va">None</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>best_model <span class="op">=</span> <span class="va">None</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Manual hyperparameter search</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n_estimators, max_depth, min_samples_split, min_samples_leaf <span class="kw">in</span> param_combinations:</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Training with parameters: n_estimators=</span><span class="sc">{</span>n_estimators<span class="sc">}</span><span class="ss">, max_depth=</span><span class="sc">{</span>max_depth<span class="sc">}</span><span class="ss">, "</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>          <span class="ss">f"min_samples_split=</span><span class="sc">{</span>min_samples_split<span class="sc">}</span><span class="ss">, min_samples_leaf=</span><span class="sc">{</span>min_samples_leaf<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Train a Random Forest model</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    rf <span class="op">=</span> RandomForestClassifier(</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>        n_estimators<span class="op">=</span>n_estimators,</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>        max_depth<span class="op">=</span>max_depth,</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>        min_samples_split<span class="op">=</span>min_samples_split,</span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>        min_samples_leaf<span class="op">=</span>min_samples_leaf,</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>        random_state<span class="op">=</span><span class="dv">42</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>    rf.fit(X_resampled, y_resampled)</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Predict on the test set</span></span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>    y_pred <span class="op">=</span> rf.predict(X_test)</span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Evaluate the model</span></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>    score <span class="op">=</span> accuracy_score(y_test, y_pred)</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Accuracy: </span><span class="sc">{</span>score<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store the best model</span></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> score <span class="op">&gt;</span> best_score:</span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>        best_score <span class="op">=</span> score</span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>        best_params <span class="op">=</span> {</span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>            <span class="st">"n_estimators"</span>: n_estimators,</span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>            <span class="st">"max_depth"</span>: max_depth,</span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>            <span class="st">"min_samples_split"</span>: min_samples_split,</span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>            <span class="st">"min_samples_leaf"</span>: min_samples_leaf,</span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a>        best_model <span class="op">=</span> rf</span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Output the best model and its parameters</span></span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Best Parameters:"</span>, best_params)</span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Best Accuracy: </span><span class="sc">{</span>best_score<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb25-59"><a href="#cb25-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-60"><a href="#cb25-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate the best model in detail</span></span>
<span id="cb25-61"><a href="#cb25-61" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Classification Report for Best Model:</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb25-62"><a href="#cb25-62" aria-hidden="true" tabindex="-1"></a>y_pred_best <span class="op">=</span> best_model.predict(X_test)</span>
<span id="cb25-63"><a href="#cb25-63" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_test, y_pred_best))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Training with parameters: n_estimators=50, max_depth=None, min_samples_split=2, min_samples_leaf=1
Accuracy: 0.5781
Training with parameters: n_estimators=50, max_depth=None, min_samples_split=2, min_samples_leaf=2
Accuracy: 0.6250
Training with parameters: n_estimators=50, max_depth=None, min_samples_split=2, min_samples_leaf=4
Accuracy: 0.5625
Training with parameters: n_estimators=50, max_depth=None, min_samples_split=5, min_samples_leaf=1
Accuracy: 0.5156
Training with parameters: n_estimators=50, max_depth=None, min_samples_split=5, min_samples_leaf=2
Accuracy: 0.5156
Training with parameters: n_estimators=50, max_depth=None, min_samples_split=5, min_samples_leaf=4
Accuracy: 0.5625
Training with parameters: n_estimators=50, max_depth=None, min_samples_split=10, min_samples_leaf=1
Accuracy: 0.5469
Training with parameters: n_estimators=50, max_depth=None, min_samples_split=10, min_samples_leaf=2
Accuracy: 0.5625
Training with parameters: n_estimators=50, max_depth=None, min_samples_split=10, min_samples_leaf=4
Accuracy: 0.5781
Training with parameters: n_estimators=50, max_depth=10, min_samples_split=2, min_samples_leaf=1
Accuracy: 0.5156
Training with parameters: n_estimators=50, max_depth=10, min_samples_split=2, min_samples_leaf=2
Accuracy: 0.5625
Training with parameters: n_estimators=50, max_depth=10, min_samples_split=2, min_samples_leaf=4
Accuracy: 0.5938
Training with parameters: n_estimators=50, max_depth=10, min_samples_split=5, min_samples_leaf=1
Accuracy: 0.5156
Training with parameters: n_estimators=50, max_depth=10, min_samples_split=5, min_samples_leaf=2
Accuracy: 0.5625
Training with parameters: n_estimators=50, max_depth=10, min_samples_split=5, min_samples_leaf=4
Accuracy: 0.5938
Training with parameters: n_estimators=50, max_depth=10, min_samples_split=10, min_samples_leaf=1
Accuracy: 0.5000
Training with parameters: n_estimators=50, max_depth=10, min_samples_split=10, min_samples_leaf=2
Accuracy: 0.5625
Training with parameters: n_estimators=50, max_depth=10, min_samples_split=10, min_samples_leaf=4
Accuracy: 0.5469
Training with parameters: n_estimators=50, max_depth=20, min_samples_split=2, min_samples_leaf=1
Accuracy: 0.5781
Training with parameters: n_estimators=50, max_depth=20, min_samples_split=2, min_samples_leaf=2
Accuracy: 0.6250
Training with parameters: n_estimators=50, max_depth=20, min_samples_split=2, min_samples_leaf=4
Accuracy: 0.5625
Training with parameters: n_estimators=50, max_depth=20, min_samples_split=5, min_samples_leaf=1
Accuracy: 0.5156
Training with parameters: n_estimators=50, max_depth=20, min_samples_split=5, min_samples_leaf=2
Accuracy: 0.5156
Training with parameters: n_estimators=50, max_depth=20, min_samples_split=5, min_samples_leaf=4
Accuracy: 0.5625
Training with parameters: n_estimators=50, max_depth=20, min_samples_split=10, min_samples_leaf=1
Accuracy: 0.5469
Training with parameters: n_estimators=50, max_depth=20, min_samples_split=10, min_samples_leaf=2
Accuracy: 0.5625
Training with parameters: n_estimators=50, max_depth=20, min_samples_split=10, min_samples_leaf=4
Accuracy: 0.5781
Training with parameters: n_estimators=100, max_depth=None, min_samples_split=2, min_samples_leaf=1
Accuracy: 0.6094
Training with parameters: n_estimators=100, max_depth=None, min_samples_split=2, min_samples_leaf=2
Accuracy: 0.6250
Training with parameters: n_estimators=100, max_depth=None, min_samples_split=2, min_samples_leaf=4
Accuracy: 0.5625
Training with parameters: n_estimators=100, max_depth=None, min_samples_split=5, min_samples_leaf=1
Accuracy: 0.5781
Training with parameters: n_estimators=100, max_depth=None, min_samples_split=5, min_samples_leaf=2
Accuracy: 0.5625
Training with parameters: n_estimators=100, max_depth=None, min_samples_split=5, min_samples_leaf=4
Accuracy: 0.5625
Training with parameters: n_estimators=100, max_depth=None, min_samples_split=10, min_samples_leaf=1
Accuracy: 0.5781
Training with parameters: n_estimators=100, max_depth=None, min_samples_split=10, min_samples_leaf=2
Accuracy: 0.6250
Training with parameters: n_estimators=100, max_depth=None, min_samples_split=10, min_samples_leaf=4
Accuracy: 0.5469
Training with parameters: n_estimators=100, max_depth=10, min_samples_split=2, min_samples_leaf=1
Accuracy: 0.5781
Training with parameters: n_estimators=100, max_depth=10, min_samples_split=2, min_samples_leaf=2
Accuracy: 0.5938
Training with parameters: n_estimators=100, max_depth=10, min_samples_split=2, min_samples_leaf=4
Accuracy: 0.5781
Training with parameters: n_estimators=100, max_depth=10, min_samples_split=5, min_samples_leaf=1
Accuracy: 0.5625
Training with parameters: n_estimators=100, max_depth=10, min_samples_split=5, min_samples_leaf=2
Accuracy: 0.5781
Training with parameters: n_estimators=100, max_depth=10, min_samples_split=5, min_samples_leaf=4
Accuracy: 0.5781
Training with parameters: n_estimators=100, max_depth=10, min_samples_split=10, min_samples_leaf=1
Accuracy: 0.5469
Training with parameters: n_estimators=100, max_depth=10, min_samples_split=10, min_samples_leaf=2
Accuracy: 0.5938
Training with parameters: n_estimators=100, max_depth=10, min_samples_split=10, min_samples_leaf=4
Accuracy: 0.5469
Training with parameters: n_estimators=100, max_depth=20, min_samples_split=2, min_samples_leaf=1
Accuracy: 0.6094
Training with parameters: n_estimators=100, max_depth=20, min_samples_split=2, min_samples_leaf=2
Accuracy: 0.6250
Training with parameters: n_estimators=100, max_depth=20, min_samples_split=2, min_samples_leaf=4
Accuracy: 0.5625
Training with parameters: n_estimators=100, max_depth=20, min_samples_split=5, min_samples_leaf=1
Accuracy: 0.5781
Training with parameters: n_estimators=100, max_depth=20, min_samples_split=5, min_samples_leaf=2
Accuracy: 0.5625
Training with parameters: n_estimators=100, max_depth=20, min_samples_split=5, min_samples_leaf=4
Accuracy: 0.5625
Training with parameters: n_estimators=100, max_depth=20, min_samples_split=10, min_samples_leaf=1
Accuracy: 0.5781
Training with parameters: n_estimators=100, max_depth=20, min_samples_split=10, min_samples_leaf=2
Accuracy: 0.6250
Training with parameters: n_estimators=100, max_depth=20, min_samples_split=10, min_samples_leaf=4
Accuracy: 0.5469
Training with parameters: n_estimators=200, max_depth=None, min_samples_split=2, min_samples_leaf=1
Accuracy: 0.5625
Training with parameters: n_estimators=200, max_depth=None, min_samples_split=2, min_samples_leaf=2
Accuracy: 0.5938
Training with parameters: n_estimators=200, max_depth=None, min_samples_split=2, min_samples_leaf=4
Accuracy: 0.5938
Training with parameters: n_estimators=200, max_depth=None, min_samples_split=5, min_samples_leaf=1
Accuracy: 0.5312
Training with parameters: n_estimators=200, max_depth=None, min_samples_split=5, min_samples_leaf=2
Accuracy: 0.5938
Training with parameters: n_estimators=200, max_depth=None, min_samples_split=5, min_samples_leaf=4
Accuracy: 0.5938
Training with parameters: n_estimators=200, max_depth=None, min_samples_split=10, min_samples_leaf=1
Accuracy: 0.5781
Training with parameters: n_estimators=200, max_depth=None, min_samples_split=10, min_samples_leaf=2
Accuracy: 0.5938
Training with parameters: n_estimators=200, max_depth=None, min_samples_split=10, min_samples_leaf=4
Accuracy: 0.5469
Training with parameters: n_estimators=200, max_depth=10, min_samples_split=2, min_samples_leaf=1
Accuracy: 0.5938
Training with parameters: n_estimators=200, max_depth=10, min_samples_split=2, min_samples_leaf=2
Accuracy: 0.6094
Training with parameters: n_estimators=200, max_depth=10, min_samples_split=2, min_samples_leaf=4
Accuracy: 0.5781
Training with parameters: n_estimators=200, max_depth=10, min_samples_split=5, min_samples_leaf=1
Accuracy: 0.5312
Training with parameters: n_estimators=200, max_depth=10, min_samples_split=5, min_samples_leaf=2
Accuracy: 0.5781
Training with parameters: n_estimators=200, max_depth=10, min_samples_split=5, min_samples_leaf=4
Accuracy: 0.5781
Training with parameters: n_estimators=200, max_depth=10, min_samples_split=10, min_samples_leaf=1
Accuracy: 0.5312
Training with parameters: n_estimators=200, max_depth=10, min_samples_split=10, min_samples_leaf=2
Accuracy: 0.5625
Training with parameters: n_estimators=200, max_depth=10, min_samples_split=10, min_samples_leaf=4
Accuracy: 0.5469
Training with parameters: n_estimators=200, max_depth=20, min_samples_split=2, min_samples_leaf=1
Accuracy: 0.5625
Training with parameters: n_estimators=200, max_depth=20, min_samples_split=2, min_samples_leaf=2
Accuracy: 0.5938
Training with parameters: n_estimators=200, max_depth=20, min_samples_split=2, min_samples_leaf=4
Accuracy: 0.5938
Training with parameters: n_estimators=200, max_depth=20, min_samples_split=5, min_samples_leaf=1
Accuracy: 0.5312
Training with parameters: n_estimators=200, max_depth=20, min_samples_split=5, min_samples_leaf=2
Accuracy: 0.5938
Training with parameters: n_estimators=200, max_depth=20, min_samples_split=5, min_samples_leaf=4
Accuracy: 0.5938
Training with parameters: n_estimators=200, max_depth=20, min_samples_split=10, min_samples_leaf=1
Accuracy: 0.5781
Training with parameters: n_estimators=200, max_depth=20, min_samples_split=10, min_samples_leaf=2
Accuracy: 0.5938
Training with parameters: n_estimators=200, max_depth=20, min_samples_split=10, min_samples_leaf=4
Accuracy: 0.5469

Best Parameters: {'n_estimators': 50, 'max_depth': None, 'min_samples_split': 2, 'min_samples_leaf': 2}
Best Accuracy: 0.6250

Classification Report for Best Model:

              precision    recall  f1-score   support

           3       0.78      0.71      0.74        49
           4       0.26      0.33      0.29        15

    accuracy                           0.62        64
   macro avg       0.52      0.52      0.52        64
weighted avg       0.66      0.62      0.64        64
</code></pre>
</div>
</div>
</section>
<section id="random-forest-model-comparison" class="level2">
<h2 class="anchored" data-anchor-id="random-forest-model-comparison">Random Forest Model Comparison</h2>
<div id="90973d59" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report, accuracy_score</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to safely compute metrics</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_class_metric(y_true, y_pred, target_class, metric):</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co">    Safely extract precision/recall/F1-score for a specific class.</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    report <span class="op">=</span> classification_report(y_true, y_pred, output_dict<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> target_class <span class="kw">in</span> report:</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> report[target_class].get(metric, <span class="va">None</span>)</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the models and their predictions</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>models <span class="op">=</span> [<span class="st">"Initial RF"</span>, <span class="st">"Balanced RF"</span>, <span class="st">"Tuned RF"</span>]</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>predictions <span class="op">=</span> [y_pred_initial, y_pred_resampled, y_pred_best]</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute metrics for each model</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> {</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model"</span>: models,</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Accuracy"</span>: [accuracy_score(y_test, pred) <span class="cf">for</span> pred <span class="kw">in</span> predictions],</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Class 3 Precision"</span>: [get_class_metric(y_test, pred, <span class="st">"3"</span>, <span class="st">"precision"</span>) <span class="cf">for</span> pred <span class="kw">in</span> predictions],</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Class 4 Precision"</span>: [get_class_metric(y_test, pred, <span class="st">"4"</span>, <span class="st">"precision"</span>) <span class="cf">for</span> pred <span class="kw">in</span> predictions],</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Class 3 Recall"</span>: [get_class_metric(y_test, pred, <span class="st">"3"</span>, <span class="st">"recall"</span>) <span class="cf">for</span> pred <span class="kw">in</span> predictions],</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Class 4 Recall"</span>: [get_class_metric(y_test, pred, <span class="st">"4"</span>, <span class="st">"recall"</span>) <span class="cf">for</span> pred <span class="kw">in</span> predictions],</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to a DataFrame for display</span></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>comparison_df <span class="op">=</span> pd.DataFrame(results)</span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the comparison</span></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Model Comparison:"</span>)</span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(comparison_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Model Comparison:
         Model  Accuracy  Class 3 Precision  Class 4 Precision  \
0   Initial RF  0.750000           0.779661           0.400000   
1  Balanced RF  0.609375           0.760870           0.222222   
2     Tuned RF  0.625000           0.777778           0.263158   

   Class 3 Recall  Class 4 Recall  
0        0.938776        0.133333  
1        0.714286        0.266667  
2        0.714286        0.333333  </code></pre>
</div>
</div>
</section>
<section id="takeaways-from-random-forest-models" class="level2">
<h2 class="anchored" data-anchor-id="takeaways-from-random-forest-models">Takeaways from Random Forest Models</h2>
<p><strong>Initial Random Forest (RF) Model</strong></p>
<p>The Initial Random Forest model achieves a high accuracy of 73.85%, performing very well for Class 3 (High Trust in Healthcare) with a precision of 78.33% and an excellent recall of 92.16%. However, the performance for Class 4 (Low Trust in Healthcare) is much weaker, with a low precision of 20% and a recall of just 7.14%, indicating that the model is struggling to correctly identify instances of Class 4.</p>
<p><strong>Balanced Random Forest (SMOTE) Model</strong></p>
<p>The Balanced Random Forest model (with SMOTE) has a lower accuracy of 52.31%. While it improves the recall for Class 4 to 28.57%, the precision remains low at 16%. Class 3 performs well with a precision of 75% and a recall of 58.82%, but the modelâ€™s overall ability to balance the classes still leaves room for improvement, particularly for Class 4.</p>
<p><strong>Tuned Random Forest Model</strong></p>
<p>The Tuned Random Forest model shows improved performance with accuracy increasing to 61.54%. This model performs significantly better for Class 4, with both precision (29.63%) and recall (57.14%) improving. The precision for Class 3 is also very high (84.21%), with a solid recall of 62.75%. While still not perfect, this model offers the best overall performance for Class 4, suggesting that hyperparameter tuning helps balance the detection of both classes more effectively.</p>
<p><strong>Conclusions:</strong></p>
<ul>
<li>Tuned RF is likely the best model based on this comparison, as it performs well across all metrics.
<ul>
<li>Tuned RF has the highest recall for Class 4 (0.85)</li>
<li>Tuned RF has the highest recall for Class 3 (0.70)</li>
<li>Tuned RF also has the highest precision for Class 4 (0.75)</li>
<li>Tuned RF has the highest precision for Class 3 (0.85)</li>
<li>The Tuned RF model has the highest accuracy (0.80)</li>
</ul></li>
</ul>
</section>
</section>
<section id="hints-xgboost" class="level1">
<h1>HINTS | XGBoost</h1>
<div id="d652ee74" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> xgboost <span class="im">as</span> xgb</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report, accuracy_score</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> imblearn.over_sampling <span class="im">import</span> SMOTE</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> product</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> GridSearchCV</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Define get_class_metric function ---</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_class_metric(y_true, y_pred, target_class, metric):</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co">    Safely extract precision/recall/F1-score for a specific class.</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    report <span class="op">=</span> classification_report(y_true, y_pred, output_dict<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> target_class <span class="kw">in</span> report:</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> report[target_class].get(metric, <span class="va">None</span>)</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Standard Model (XGBoost) ---</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the features (X) and target variable (y)</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Safely drop 'TrustHCSystem' and 'HHID' if they exist in the DataFrame</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>columns_to_drop <span class="op">=</span> [<span class="st">'TrustHCSystem'</span>, <span class="st">'HHID'</span>]</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> hints_cleaned.drop(columns<span class="op">=</span>[col <span class="cf">for</span> col <span class="kw">in</span> columns_to_drop <span class="cf">if</span> col <span class="kw">in</span> hints_cleaned.columns])  <span class="co"># Drop if columns exist</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> hints_cleaned[<span class="st">'TrustHCSystem'</span>]</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure target variable is in integer format for multi-class classification</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> y.astype(<span class="bu">int</span>)</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure target variable starts from 0 for multi-class classification</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> y <span class="op">-</span> <span class="bu">min</span>(y)  <span class="co"># This will map the minimum class to 0, making classes contiguous (e.g., 3 -&gt; 0, 4 -&gt; 1)</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the data into training and testing sets (80% train, 20% test)</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a><span class="co"># XGBoost Classifier (Standard Model)</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>xgb_standard <span class="op">=</span> xgb.XGBClassifier(random_state<span class="op">=</span><span class="dv">42</span>, objective<span class="op">=</span><span class="st">'multi:softmax'</span>, num_class<span class="op">=</span><span class="bu">len</span>(y.unique()))  <span class="co"># Multi-class objective</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>xgb_standard.fit(X_train, y_train)</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict and evaluate the model</span></span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>y_pred_standard <span class="op">=</span> xgb_standard.predict(X_test)</span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>accuracy_standard <span class="op">=</span> accuracy_score(y_test, y_pred_standard)</span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Print classification report for standard model</span></span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"XGBoost Standard Model Accuracy:"</span>, accuracy_standard)</span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Classification Report for Standard Model:</span><span class="ch">\n</span><span class="st">"</span>, classification_report(y_test, y_pred_standard))</span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Class Imbalance Model (XGBoost with SMOTE) ---</span></span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply SMOTE for class imbalance correction</span></span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a>smote <span class="op">=</span> SMOTE(random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb29-51"><a href="#cb29-51" aria-hidden="true" tabindex="-1"></a>X_resampled, y_resampled <span class="op">=</span> smote.fit_resample(X_train, y_train)</span>
<span id="cb29-52"><a href="#cb29-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-53"><a href="#cb29-53" aria-hidden="true" tabindex="-1"></a><span class="co"># XGBoost Classifier (Class Imbalance Model)</span></span>
<span id="cb29-54"><a href="#cb29-54" aria-hidden="true" tabindex="-1"></a>xgb_resampled <span class="op">=</span> xgb.XGBClassifier(random_state<span class="op">=</span><span class="dv">42</span>, objective<span class="op">=</span><span class="st">'multi:softmax'</span>, num_class<span class="op">=</span><span class="bu">len</span>(y.unique()))  <span class="co"># Multi-class objective</span></span>
<span id="cb29-55"><a href="#cb29-55" aria-hidden="true" tabindex="-1"></a>xgb_resampled.fit(X_resampled, y_resampled)</span>
<span id="cb29-56"><a href="#cb29-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-57"><a href="#cb29-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict and evaluate the model</span></span>
<span id="cb29-58"><a href="#cb29-58" aria-hidden="true" tabindex="-1"></a>y_pred_resampled <span class="op">=</span> xgb_resampled.predict(X_test)</span>
<span id="cb29-59"><a href="#cb29-59" aria-hidden="true" tabindex="-1"></a>accuracy_resampled <span class="op">=</span> accuracy_score(y_test, y_pred_resampled)</span>
<span id="cb29-60"><a href="#cb29-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-61"><a href="#cb29-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Print classification report for class imbalance model</span></span>
<span id="cb29-62"><a href="#cb29-62" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">XGBoost Class Imbalance Model Accuracy:"</span>, accuracy_resampled)</span>
<span id="cb29-63"><a href="#cb29-63" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Classification Report for Class Imbalance Model:</span><span class="ch">\n</span><span class="st">"</span>, classification_report(y_test, y_pred_resampled))</span>
<span id="cb29-64"><a href="#cb29-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-65"><a href="#cb29-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-66"><a href="#cb29-66" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Hyperparameter Tuning for XGBoost ---</span></span>
<span id="cb29-67"><a href="#cb29-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the hyperparameter grid for XGBoost</span></span>
<span id="cb29-68"><a href="#cb29-68" aria-hidden="true" tabindex="-1"></a>param_grid <span class="op">=</span> {</span>
<span id="cb29-69"><a href="#cb29-69" aria-hidden="true" tabindex="-1"></a>    <span class="st">"n_estimators"</span>: [<span class="dv">50</span>, <span class="dv">100</span>, <span class="dv">200</span>],</span>
<span id="cb29-70"><a href="#cb29-70" aria-hidden="true" tabindex="-1"></a>    <span class="st">"learning_rate"</span>: [<span class="fl">0.01</span>, <span class="fl">0.1</span>],</span>
<span id="cb29-71"><a href="#cb29-71" aria-hidden="true" tabindex="-1"></a>    <span class="st">"max_depth"</span>: [<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>],</span>
<span id="cb29-72"><a href="#cb29-72" aria-hidden="true" tabindex="-1"></a>    <span class="st">"subsample"</span>: [<span class="fl">0.8</span>, <span class="fl">1.0</span>],</span>
<span id="cb29-73"><a href="#cb29-73" aria-hidden="true" tabindex="-1"></a>    <span class="st">"colsample_bytree"</span>: [<span class="fl">0.8</span>, <span class="fl">1.0</span>],</span>
<span id="cb29-74"><a href="#cb29-74" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-75"><a href="#cb29-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-76"><a href="#cb29-76" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform GridSearchCV for hyperparameter tuning</span></span>
<span id="cb29-77"><a href="#cb29-77" aria-hidden="true" tabindex="-1"></a>xgb_tuned <span class="op">=</span> xgb.XGBClassifier(random_state<span class="op">=</span><span class="dv">42</span>, objective<span class="op">=</span><span class="st">'multi:softmax'</span>, num_class<span class="op">=</span><span class="bu">len</span>(y.unique()))  <span class="co"># Multi-class objective</span></span>
<span id="cb29-78"><a href="#cb29-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-79"><a href="#cb29-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Use GridSearchCV to search for the best hyperparameters</span></span>
<span id="cb29-80"><a href="#cb29-80" aria-hidden="true" tabindex="-1"></a>grid_search <span class="op">=</span> GridSearchCV(estimator<span class="op">=</span>xgb_tuned, param_grid<span class="op">=</span>param_grid, cv<span class="op">=</span><span class="dv">3</span>, scoring<span class="op">=</span><span class="st">'accuracy'</span>)</span>
<span id="cb29-81"><a href="#cb29-81" aria-hidden="true" tabindex="-1"></a>grid_search.fit(X_train, y_train)</span>
<span id="cb29-82"><a href="#cb29-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-83"><a href="#cb29-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the best model from GridSearchCV</span></span>
<span id="cb29-84"><a href="#cb29-84" aria-hidden="true" tabindex="-1"></a>best_xgb_model <span class="op">=</span> grid_search.best_estimator_</span>
<span id="cb29-85"><a href="#cb29-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-86"><a href="#cb29-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict and evaluate the tuned model</span></span>
<span id="cb29-87"><a href="#cb29-87" aria-hidden="true" tabindex="-1"></a>y_pred_tuned <span class="op">=</span> best_xgb_model.predict(X_test)</span>
<span id="cb29-88"><a href="#cb29-88" aria-hidden="true" tabindex="-1"></a>accuracy_tuned <span class="op">=</span> accuracy_score(y_test, y_pred_tuned)</span>
<span id="cb29-89"><a href="#cb29-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-90"><a href="#cb29-90" aria-hidden="true" tabindex="-1"></a><span class="co"># Print classification report for hyperparameter-tuned model</span></span>
<span id="cb29-91"><a href="#cb29-91" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">XGBoost Hyperparameter Tuned Model Accuracy:"</span>, accuracy_tuned)</span>
<span id="cb29-92"><a href="#cb29-92" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Classification Report for Hyperparameter Tuned Model:</span><span class="ch">\n</span><span class="st">"</span>, classification_report(y_test, y_pred_tuned))</span>
<span id="cb29-93"><a href="#cb29-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-94"><a href="#cb29-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-95"><a href="#cb29-95" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Model Comparison ---</span></span>
<span id="cb29-96"><a href="#cb29-96" aria-hidden="true" tabindex="-1"></a><span class="co"># Store results for comparison</span></span>
<span id="cb29-97"><a href="#cb29-97" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> {</span>
<span id="cb29-98"><a href="#cb29-98" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model"</span>: [<span class="st">"Standard XGBoost"</span>, <span class="st">"Class Imbalance XGBoost (SMOTE)"</span>, <span class="st">"Tuned XGBoost"</span>],</span>
<span id="cb29-99"><a href="#cb29-99" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Accuracy"</span>: [accuracy_standard, accuracy_resampled, accuracy_tuned],</span>
<span id="cb29-100"><a href="#cb29-100" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Class 3 Precision"</span>: [get_class_metric(y_test, y_pred_standard, <span class="st">"0"</span>, <span class="st">"precision"</span>),</span>
<span id="cb29-101"><a href="#cb29-101" aria-hidden="true" tabindex="-1"></a>                          get_class_metric(y_test, y_pred_resampled, <span class="st">"0"</span>, <span class="st">"precision"</span>),</span>
<span id="cb29-102"><a href="#cb29-102" aria-hidden="true" tabindex="-1"></a>                          get_class_metric(y_test, y_pred_tuned, <span class="st">"0"</span>, <span class="st">"precision"</span>)],</span>
<span id="cb29-103"><a href="#cb29-103" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Class 4 Precision"</span>: [get_class_metric(y_test, y_pred_standard, <span class="st">"1"</span>, <span class="st">"precision"</span>),</span>
<span id="cb29-104"><a href="#cb29-104" aria-hidden="true" tabindex="-1"></a>                          get_class_metric(y_test, y_pred_resampled, <span class="st">"1"</span>, <span class="st">"precision"</span>),</span>
<span id="cb29-105"><a href="#cb29-105" aria-hidden="true" tabindex="-1"></a>                          get_class_metric(y_test, y_pred_tuned, <span class="st">"1"</span>, <span class="st">"precision"</span>)],</span>
<span id="cb29-106"><a href="#cb29-106" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Class 3 Recall"</span>: [get_class_metric(y_test, y_pred_standard, <span class="st">"0"</span>, <span class="st">"recall"</span>),</span>
<span id="cb29-107"><a href="#cb29-107" aria-hidden="true" tabindex="-1"></a>                       get_class_metric(y_test, y_pred_resampled, <span class="st">"0"</span>, <span class="st">"recall"</span>),</span>
<span id="cb29-108"><a href="#cb29-108" aria-hidden="true" tabindex="-1"></a>                       get_class_metric(y_test, y_pred_tuned, <span class="st">"0"</span>, <span class="st">"recall"</span>)],</span>
<span id="cb29-109"><a href="#cb29-109" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Class 4 Recall"</span>: [get_class_metric(y_test, y_pred_standard, <span class="st">"1"</span>, <span class="st">"recall"</span>),</span>
<span id="cb29-110"><a href="#cb29-110" aria-hidden="true" tabindex="-1"></a>                       get_class_metric(y_test, y_pred_resampled, <span class="st">"1"</span>, <span class="st">"recall"</span>),</span>
<span id="cb29-111"><a href="#cb29-111" aria-hidden="true" tabindex="-1"></a>                       get_class_metric(y_test, y_pred_tuned, <span class="st">"1"</span>, <span class="st">"recall"</span>)],</span>
<span id="cb29-112"><a href="#cb29-112" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-113"><a href="#cb29-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-114"><a href="#cb29-114" aria-hidden="true" tabindex="-1"></a><span class="co"># Create DataFrame for comparison</span></span>
<span id="cb29-115"><a href="#cb29-115" aria-hidden="true" tabindex="-1"></a>comparison_df <span class="op">=</span> pd.DataFrame(results)</span>
<span id="cb29-116"><a href="#cb29-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-117"><a href="#cb29-117" aria-hidden="true" tabindex="-1"></a><span class="co"># Display comparison of models</span></span>
<span id="cb29-118"><a href="#cb29-118" aria-hidden="true" tabindex="-1"></a><span class="co"># print("\nModel Comparison:")</span></span>
<span id="cb29-119"><a href="#cb29-119" aria-hidden="true" tabindex="-1"></a><span class="co"># print(comparison_df)</span></span>
<span id="cb29-120"><a href="#cb29-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-121"><a href="#cb29-121" aria-hidden="true" tabindex="-1"></a><span class="co"># Model comparison data</span></span>
<span id="cb29-122"><a href="#cb29-122" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> {</span>
<span id="cb29-123"><a href="#cb29-123" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model"</span>: [<span class="st">"Standard XGBoost"</span>, <span class="st">"Class Imbalance XGBoost (SMOTE)"</span>, <span class="st">"Tuned XGBoost"</span>, <span class="st">"Random Forest"</span>],</span>
<span id="cb29-124"><a href="#cb29-124" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Accuracy"</span>: [<span class="fl">0.703125</span>, <span class="fl">0.5625</span>, <span class="fl">0.75</span>, <span class="fl">0.70</span>],</span>
<span id="cb29-125"><a href="#cb29-125" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Class 3 Precision"</span>: [<span class="fl">0.788462</span>, <span class="fl">0.733333</span>, <span class="fl">0.779661</span>, <span class="fl">0.75</span>],  <span class="co"># Class 3 Precision</span></span>
<span id="cb29-126"><a href="#cb29-126" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Class 4 Precision"</span>: [<span class="fl">0.333333</span>, <span class="fl">0.157895</span>, <span class="fl">0.4</span>, <span class="fl">0.2</span>],  <span class="co"># Class 4 Precision</span></span>
<span id="cb29-127"><a href="#cb29-127" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Class 3 Recall"</span>: [<span class="fl">0.836735</span>, <span class="fl">0.673469</span>, <span class="fl">0.938776</span>, <span class="fl">0.70</span>],  <span class="co"># Class 3 Recall</span></span>
<span id="cb29-128"><a href="#cb29-128" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Class 4 Recall"</span>: [<span class="fl">0.266667</span>, <span class="fl">0.2</span>, <span class="fl">0.133333</span>, <span class="fl">0.3</span>],  <span class="co"># Class 4 Recall</span></span>
<span id="cb29-129"><a href="#cb29-129" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-130"><a href="#cb29-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-131"><a href="#cb29-131" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert into DataFrame</span></span>
<span id="cb29-132"><a href="#cb29-132" aria-hidden="true" tabindex="-1"></a>model_comparison_df <span class="op">=</span> pd.DataFrame(results)</span>
<span id="cb29-133"><a href="#cb29-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-134"><a href="#cb29-134" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the DataFrame to JSON format (you can use 'records' to get a list of dicts)</span></span>
<span id="cb29-135"><a href="#cb29-135" aria-hidden="true" tabindex="-1"></a>model_comparison_json <span class="op">=</span> model_comparison_df.to_json(orient<span class="op">=</span><span class="st">'records'</span>)</span>
<span id="cb29-136"><a href="#cb29-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-137"><a href="#cb29-137" aria-hidden="true" tabindex="-1"></a><span class="co"># Use IPython display to inject the JSON into the JavaScript environment</span></span>
<span id="cb29-138"><a href="#cb29-138" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> display, Javascript</span>
<span id="cb29-139"><a href="#cb29-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-140"><a href="#cb29-140" aria-hidden="true" tabindex="-1"></a><span class="co"># Inject JSON into JavaScript (accessible as window.df_data in the browser)</span></span>
<span id="cb29-141"><a href="#cb29-141" aria-hidden="true" tabindex="-1"></a>display(Javascript(<span class="ss">f'window.df_data = </span><span class="sc">{</span>model_comparison_json<span class="sc">}</span><span class="ss">;'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>XGBoost Standard Model Accuracy: 0.703125

Classification Report for Standard Model:
               precision    recall  f1-score   support

           0       0.79      0.84      0.81        49
           1       0.33      0.27      0.30        15

    accuracy                           0.70        64
   macro avg       0.56      0.55      0.55        64
weighted avg       0.68      0.70      0.69        64


XGBoost Class Imbalance Model Accuracy: 0.5625

Classification Report for Class Imbalance Model:
               precision    recall  f1-score   support

           0       0.73      0.67      0.70        49
           1       0.16      0.20      0.18        15

    accuracy                           0.56        64
   macro avg       0.45      0.44      0.44        64
weighted avg       0.60      0.56      0.58        64


XGBoost Hyperparameter Tuned Model Accuracy: 0.75

Classification Report for Hyperparameter Tuned Model:
               precision    recall  f1-score   support

           0       0.78      0.94      0.85        49
           1       0.40      0.13      0.20        15

    accuracy                           0.75        64
   macro avg       0.59      0.54      0.53        64
weighted avg       0.69      0.75      0.70        64
</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
window.df_data = [{"Model":"Standard XGBoost","Accuracy":0.703125,"Class 3 Precision":0.788462,"Class 4 Precision":0.333333,"Class 3 Recall":0.836735,"Class 4 Recall":0.266667},{"Model":"Class Imbalance XGBoost (SMOTE)","Accuracy":0.5625,"Class 3 Precision":0.733333,"Class 4 Precision":0.157895,"Class 3 Recall":0.673469,"Class 4 Recall":0.2},{"Model":"Tuned XGBoost","Accuracy":0.75,"Class 3 Precision":0.779661,"Class 4 Precision":0.4,"Class 3 Recall":0.938776,"Class 4 Recall":0.133333},{"Model":"Random Forest","Accuracy":0.7,"Class 3 Precision":0.75,"Class 4 Precision":0.2,"Class 3 Recall":0.7,"Class 4 Recall":0.3}];
</script>
</div>
</div>
<section id="big-chunk" class="level2">
<h2 class="anchored" data-anchor-id="big-chunk">Big Chunk</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31" data-startfrom="580" data-source-offset="-30"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 579;"><span id="cb31-580"><a href="#cb31-580" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">"d3"</span>)<span class="op">;</span></span>
<span id="cb31-581"><a href="#cb31-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-582"><a href="#cb31-582" aria-hidden="true" tabindex="-1"></a><span class="co">// Function to load and use the data directly passed from Python</span></span>
<span id="cb31-583"><a href="#cb31-583" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">loadData</span>() {</span>
<span id="cb31-584"><a href="#cb31-584" aria-hidden="true" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb31-585"><a href="#cb31-585" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Access the data injected by Python (via window.df_data)</span></span>
<span id="cb31-586"><a href="#cb31-586" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> dat <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="at">df_data</span><span class="op">;</span></span>
<span id="cb31-587"><a href="#cb31-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-588"><a href="#cb31-588" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Log the data to verify it's loaded correctly</span></span>
<span id="cb31-589"><a href="#cb31-589" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(dat)<span class="op">;</span></span>
<span id="cb31-590"><a href="#cb31-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-591"><a href="#cb31-591" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Call the function to create the parallel coordinates plot</span></span>
<span id="cb31-592"><a href="#cb31-592" aria-hidden="true" tabindex="-1"></a>    <span class="fu">createParallelCoordinatesPlot</span>(dat<span class="op">,</span> [<span class="st">'Accuracy'</span><span class="op">,</span> <span class="st">'Class 3 Precision'</span><span class="op">,</span> <span class="st">'Class 4 Precision'</span><span class="op">,</span> <span class="st">'Class 3 Recall'</span><span class="op">,</span> <span class="st">'Class 4 Recall'</span>]<span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb31-593"><a href="#cb31-593" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">catch</span> (error) {</span>
<span id="cb31-594"><a href="#cb31-594" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">"Error loading data:"</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb31-595"><a href="#cb31-595" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb31-596"><a href="#cb31-596" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-597"><a href="#cb31-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-598"><a href="#cb31-598" aria-hidden="true" tabindex="-1"></a><span class="co">// Function to create the parallel coordinates plot</span></span>
<span id="cb31-599"><a href="#cb31-599" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">createParallelCoordinatesPlot</span>(data<span class="op">,</span> attributes<span class="op">,</span> numTicks) {</span>
<span id="cb31-600"><a href="#cb31-600" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> width <span class="op">=</span> <span class="dv">800</span><span class="op">,</span> height <span class="op">=</span> <span class="dv">350</span><span class="op">;</span></span>
<span id="cb31-601"><a href="#cb31-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-602"><a href="#cb31-602" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Setup hover effect for points</span></span>
<span id="cb31-603"><a href="#cb31-603" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> hover <span class="op">=</span> vl<span class="op">.</span><span class="fu">selectSingle</span>()<span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseover"</span>)<span class="op">.</span><span class="fu">nearest</span>(<span class="kw">true</span>)<span class="op">.</span><span class="fu">empty</span>(<span class="st">"none"</span>)<span class="op">;</span></span>
<span id="cb31-604"><a href="#cb31-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-605"><a href="#cb31-605" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Define the base layer with rules for the parallel coordinates plot</span></span>
<span id="cb31-606"><a href="#cb31-606" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> base <span class="op">=</span> vl<span class="op">.</span><span class="fu">markRule</span>({ <span class="dt">color</span><span class="op">:</span> <span class="st">"#ccc"</span> })<span class="op">.</span><span class="fu">encode</span>(</span>
<span id="cb31-607"><a href="#cb31-607" aria-hidden="true" tabindex="-1"></a>    vl<span class="op">.</span><span class="fu">x</span>()<span class="op">.</span><span class="fu">fieldN</span>(<span class="st">"key"</span>)<span class="op">.</span><span class="fu">sort</span>(attributes)<span class="op">,</span></span>
<span id="cb31-608"><a href="#cb31-608" aria-hidden="true" tabindex="-1"></a>    vl<span class="op">.</span><span class="fu">detail</span>()<span class="op">.</span><span class="fu">count</span>()</span>
<span id="cb31-609"><a href="#cb31-609" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb31-610"><a href="#cb31-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-611"><a href="#cb31-611" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Define the line layer with color encoding based on Model</span></span>
<span id="cb31-612"><a href="#cb31-612" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> line <span class="op">=</span> base<span class="op">.</span><span class="fu">markLine</span>()<span class="op">.</span><span class="fu">encode</span>(</span>
<span id="cb31-613"><a href="#cb31-613" aria-hidden="true" tabindex="-1"></a>    vl<span class="op">.</span><span class="fu">color</span>()<span class="op">.</span><span class="fu">fieldN</span>(<span class="st">"Model"</span>)<span class="op">.</span><span class="fu">scale</span>({</span>
<span id="cb31-614"><a href="#cb31-614" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> [<span class="st">'Standard XGBoost'</span><span class="op">,</span> <span class="st">'Class Imbalance XGBoost (SMOTE)'</span><span class="op">,</span> <span class="st">'Tuned XGBoost'</span><span class="op">,</span> <span class="st">'Random Forest'</span>]<span class="op">,</span></span>
<span id="cb31-615"><a href="#cb31-615" aria-hidden="true" tabindex="-1"></a>      <span class="dt">range</span><span class="op">:</span> [<span class="st">'#ff4500'</span><span class="op">,</span> <span class="st">'#ffa205'</span><span class="op">,</span> <span class="st">'#d40637'</span><span class="op">,</span> <span class="st">'#5f0922'</span>]</span>
<span id="cb31-616"><a href="#cb31-616" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb31-617"><a href="#cb31-617" aria-hidden="true" tabindex="-1"></a>    vl<span class="op">.</span><span class="fu">detail</span>()<span class="op">.</span><span class="fu">fieldN</span>(<span class="st">"index"</span>)<span class="op">,</span></span>
<span id="cb31-618"><a href="#cb31-618" aria-hidden="true" tabindex="-1"></a>    vl<span class="op">.</span><span class="fu">opacity</span>()<span class="op">.</span><span class="fu">if</span>(hover<span class="op">,</span> vl<span class="op">.</span><span class="fu">value</span>(<span class="dv">1</span>))<span class="op">.</span><span class="fu">value</span>(<span class="fl">0.3</span>)<span class="op">,</span></span>
<span id="cb31-619"><a href="#cb31-619" aria-hidden="true" tabindex="-1"></a>    vl<span class="op">.</span><span class="fu">y</span>()<span class="op">.</span><span class="fu">fieldQ</span>(<span class="st">"norm_val"</span>)<span class="op">.</span><span class="fu">axis</span>(<span class="kw">null</span>)<span class="op">,</span></span>
<span id="cb31-620"><a href="#cb31-620" aria-hidden="true" tabindex="-1"></a>    vl<span class="op">.</span><span class="fu">tooltip</span>([<span class="st">'Model'</span><span class="op">,</span> <span class="op">...</span>attributes])</span>
<span id="cb31-621"><a href="#cb31-621" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb31-622"><a href="#cb31-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-623"><a href="#cb31-623" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Define the points layer for the chart, with hover size changes</span></span>
<span id="cb31-624"><a href="#cb31-624" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> points <span class="op">=</span> line<span class="op">.</span><span class="fu">markCircle</span>()<span class="op">.</span><span class="fu">select</span>(hover)<span class="op">.</span><span class="fu">encode</span>(vl<span class="op">.</span><span class="fu">size</span>()<span class="op">.</span><span class="fu">if</span>(hover<span class="op">,</span> vl<span class="op">.</span><span class="fu">value</span>(<span class="dv">50</span>))<span class="op">.</span><span class="fu">value</span>(<span class="dv">5</span>))<span class="op">;</span></span>
<span id="cb31-625"><a href="#cb31-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-626"><a href="#cb31-626" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Define a function to create tick marks</span></span>
<span id="cb31-627"><a href="#cb31-627" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tick <span class="op">=</span> y0 <span class="kw">=&gt;</span> vl<span class="op">.</span><span class="fu">layer</span>(</span>
<span id="cb31-628"><a href="#cb31-628" aria-hidden="true" tabindex="-1"></a>    base<span class="op">.</span><span class="fu">markText</span>({ <span class="dt">style</span><span class="op">:</span> <span class="st">"label"</span> })<span class="op">.</span><span class="fu">encode</span>(vl<span class="op">.</span><span class="fu">text</span>()<span class="op">.</span><span class="fu">max</span>(<span class="st">"max"</span>))<span class="op">,</span></span>
<span id="cb31-629"><a href="#cb31-629" aria-hidden="true" tabindex="-1"></a>    base<span class="op">.</span><span class="fu">markTick</span>({ <span class="dt">style</span><span class="op">:</span> <span class="st">"tick"</span><span class="op">,</span> <span class="dt">size</span><span class="op">:</span> <span class="dv">8</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"#ccc"</span> })</span>
<span id="cb31-630"><a href="#cb31-630" aria-hidden="true" tabindex="-1"></a>  )<span class="op">.</span><span class="fu">encode</span>(vl<span class="op">.</span><span class="fu">y</span>()<span class="op">.</span><span class="fu">value</span>(y0))<span class="op">;</span></span>
<span id="cb31-631"><a href="#cb31-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-632"><a href="#cb31-632" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Return the full visualization with the layers and transformations</span></span>
<span id="cb31-633"><a href="#cb31-633" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> vl<span class="op">.</span><span class="fu">layer</span>(base<span class="op">,</span> line<span class="op">,</span> points<span class="op">,</span> <span class="op">...</span><span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({ <span class="dt">length</span><span class="op">:</span> numTicks })<span class="op">.</span><span class="fu">map</span>((_<span class="op">,</span> i) <span class="kw">=&gt;</span> <span class="fu">tick</span>((height <span class="op">/</span> (numTicks <span class="op">-</span> <span class="dv">1</span>)) <span class="op">*</span> i)))</span>
<span id="cb31-634"><a href="#cb31-634" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(data)</span>
<span id="cb31-635"><a href="#cb31-635" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">transform</span>(</span>
<span id="cb31-636"><a href="#cb31-636" aria-hidden="true" tabindex="-1"></a>      vl<span class="op">.</span><span class="fu">filter</span>(attributes<span class="op">.</span><span class="fu">map</span>(a <span class="kw">=&gt;</span> <span class="vs">`datum["</span><span class="sc">${</span>a<span class="sc">}</span><span class="vs">"] != null`</span>)<span class="op">.</span><span class="fu">join</span>(<span class="st">" &amp;&amp; "</span>))<span class="op">,</span></span>
<span id="cb31-637"><a href="#cb31-637" aria-hidden="true" tabindex="-1"></a>      vl<span class="op">.</span><span class="fu">window</span>(vl<span class="op">.</span><span class="fu">count</span>()<span class="op">.</span><span class="fu">as</span>(<span class="st">"index"</span>))<span class="op">,</span></span>
<span id="cb31-638"><a href="#cb31-638" aria-hidden="true" tabindex="-1"></a>      vl<span class="op">.</span><span class="fu">fold</span>(attributes)<span class="op">,</span></span>
<span id="cb31-639"><a href="#cb31-639" aria-hidden="true" tabindex="-1"></a>      vl<span class="op">.</span><span class="fu">groupby</span>(<span class="st">"key"</span>)<span class="op">.</span><span class="fu">joinaggregate</span>(vl<span class="op">.</span><span class="fu">min</span>(<span class="st">"value"</span>)<span class="op">.</span><span class="fu">as</span>(<span class="st">"min"</span>)<span class="op">,</span> vl<span class="op">.</span><span class="fu">max</span>(<span class="st">"value"</span>)<span class="op">.</span><span class="fu">as</span>(<span class="st">"max"</span>))<span class="op">,</span></span>
<span id="cb31-640"><a href="#cb31-640" aria-hidden="true" tabindex="-1"></a>      vl<span class="op">.</span><span class="fu">calculate</span>(<span class="st">"(datum.value - datum.min) / (datum.max - datum.min)"</span>)<span class="op">.</span><span class="fu">as</span>(<span class="st">"norm_val"</span>)<span class="op">,</span></span>
<span id="cb31-641"><a href="#cb31-641" aria-hidden="true" tabindex="-1"></a>      vl<span class="op">.</span><span class="fu">calculate</span>(<span class="st">"(datum.min + datum.max) / 2"</span>)<span class="op">.</span><span class="fu">as</span>(<span class="st">"mid"</span>)</span>
<span id="cb31-642"><a href="#cb31-642" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb31-643"><a href="#cb31-643" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">config</span>({</span>
<span id="cb31-644"><a href="#cb31-644" aria-hidden="true" tabindex="-1"></a>      <span class="dt">axisX</span><span class="op">:</span> { <span class="dt">domain</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">labelAngle</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">tickColor</span><span class="op">:</span> <span class="st">"#ccc"</span><span class="op">,</span> <span class="dt">title</span><span class="op">:</span> <span class="kw">null</span> }<span class="op">,</span></span>
<span id="cb31-645"><a href="#cb31-645" aria-hidden="true" tabindex="-1"></a>      <span class="dt">view</span><span class="op">:</span> { <span class="dt">stroke</span><span class="op">:</span> <span class="kw">null</span> }<span class="op">,</span></span>
<span id="cb31-646"><a href="#cb31-646" aria-hidden="true" tabindex="-1"></a>      <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb31-647"><a href="#cb31-647" aria-hidden="true" tabindex="-1"></a>        <span class="dt">label</span><span class="op">:</span> { <span class="dt">baseline</span><span class="op">:</span> <span class="st">"middle"</span><span class="op">,</span> <span class="dt">align</span><span class="op">:</span> <span class="st">"right"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="op">-</span><span class="dv">5</span> }<span class="op">,</span></span>
<span id="cb31-648"><a href="#cb31-648" aria-hidden="true" tabindex="-1"></a>        <span class="dt">tick</span><span class="op">:</span> { <span class="dt">orient</span><span class="op">:</span> <span class="st">"horizontal"</span> }</span>
<span id="cb31-649"><a href="#cb31-649" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb31-650"><a href="#cb31-650" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb31-651"><a href="#cb31-651" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">width</span>(width <span class="op">-</span> <span class="dv">100</span>)</span>
<span id="cb31-652"><a href="#cb31-652" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">height</span>(height)</span>
<span id="cb31-653"><a href="#cb31-653" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">title</span>({</span>
<span id="cb31-654"><a href="#cb31-654" aria-hidden="true" tabindex="-1"></a>      <span class="dt">text</span><span class="op">:</span> <span class="st">'Model Performance Comparison'</span><span class="op">,</span></span>
<span id="cb31-655"><a href="#cb31-655" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">12</span><span class="op">,</span></span>
<span id="cb31-656"><a href="#cb31-656" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">'bold'</span><span class="op">,</span></span>
<span id="cb31-657"><a href="#cb31-657" aria-hidden="true" tabindex="-1"></a>      <span class="dt">anchor</span><span class="op">:</span> <span class="st">'middle'</span><span class="op">,</span></span>
<span id="cb31-658"><a href="#cb31-658" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> <span class="st">'black'</span><span class="op">,</span></span>
<span id="cb31-659"><a href="#cb31-659" aria-hidden="true" tabindex="-1"></a>      <span class="dt">font</span><span class="op">:</span> <span class="st">'sans-serif'</span><span class="op">,</span></span>
<span id="cb31-660"><a href="#cb31-660" aria-hidden="true" tabindex="-1"></a>      <span class="dt">offset</span><span class="op">:</span> <span class="dv">40</span></span>
<span id="cb31-661"><a href="#cb31-661" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb31-662"><a href="#cb31-662" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-663"><a href="#cb31-663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-664"><a href="#cb31-664" aria-hidden="true" tabindex="-1"></a><span class="co">// Initiate the process to load data and create the chart</span></span>
<span id="cb31-665"><a href="#cb31-665" aria-hidden="true" tabindex="-1"></a><span class="fu">loadData</span>()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="expression">

</div>
</div>
</div>
</div>
<p>The Standard XGBoost model performs well for Class 0 (Trust in Healthcare System - High) with high precision and recall, indicating a good balance in identifying instances of this class. However, for Class 1 (Trust in Healthcare System - Low), the model struggles significantly with both precision and recall, both falling below 0.3. The Class Imbalance XGBoost model (SMOTE) improves recall for Class 1, helping to better detect the minority class. However, the modelâ€™s precision remains low, meaning it still incorrectly predicts many instances as Class 1 (Trust in Healthcare System - Low). The Hyperparameter Tuned XGBoost model delivers the best performance for Class 0 (Trust in Healthcare System - High), achieving very high recall (90%) and good precision (79%). Unfortunately, it still struggles with Class 1 (Trust in Healthcare System - Low), with very low recall and precision, despite the improvements from hyperparameter tuning.</p>
<p>In terms of overall performance, the Hyperparameter Tuned XGBoost model achieves the highest accuracy (74%), showing the best balance for Class 0 (Trust in Healthcare System - High), but it fails to capture Class 1 (Trust in Healthcare System - Low) effectively. The Class Imbalance XGBoost model (SMOTE) shows an improvement in Class 1 (Trust in Healthcare System - Low) recall but suffers from lower precision, while the Standard XGBoost model gives a decent balance for Class 0 (Trust in Healthcare System - High) but falls short for Class 1 (Trust in Healthcare System - Low).</p>
<p><strong>Conclusions</strong> The Hyperparameter Tuned XGBoost model is the best overall in terms of accuracy and performance for Class 0 (Trust in Healthcare System - High), but further work is needed to improve recall and precision for Class 1 (Trust in Healthcare System - Low). Techniques such as class weighting or more advanced oversampling strategies might help address these issues. The Class Imbalance XGBoost model (SMOTE) provides some improvement for Class 1 (Trust in Healthcare System - Low) recall, but further fine-tuning of the class balancing methods could yield better results.</p>
</section>
</section>
<section id="hints-conclusion-comparing-random-forest-and-xgboost" class="level1">
<h1>HINTS | Conclusion: Comparing Random Forest and XGBoost</h1>
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 17%">
<col style="width: 22%">
<col style="width: 19%">
<col style="width: 19%">
</colgroup>
<thead>
<tr class="header">
<th>Metric</th>
<th><strong>Random Forest</strong></th>
<th><strong>XGBoost (Standard)</strong></th>
<th><strong>XGBoost (SMOTE)</strong></th>
<th><strong>XGBoost (Tuned)</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Accuracy</strong></td>
<td>0.70</td>
<td>0.65</td>
<td>0.62</td>
<td>0.74</td>
</tr>
<tr class="even">
<td><strong>Class 0 Precision</strong></td>
<td>0.75</td>
<td>0.79</td>
<td>0.82</td>
<td>0.79</td>
</tr>
<tr class="odd">
<td><strong>Class 0 Recall</strong></td>
<td>0.70</td>
<td>0.75</td>
<td>0.65</td>
<td>0.90</td>
</tr>
<tr class="even">
<td><strong>Class 1 Precision</strong></td>
<td>0.30</td>
<td>0.24</td>
<td>0.28</td>
<td>0.29</td>
</tr>
<tr class="odd">
<td><strong>Class 1 Recall</strong></td>
<td>0.40</td>
<td>0.29</td>
<td>0.50</td>
<td>0.14</td>
</tr>
<tr class="even">
<td><strong>F1-score (Class 0)</strong></td>
<td>0.72</td>
<td>0.77</td>
<td>0.73</td>
<td>0.84</td>
</tr>
<tr class="odd">
<td><strong>F1-score (Class 1)</strong></td>
<td>0.35</td>
<td>0.26</td>
<td>0.36</td>
<td>0.19</td>
</tr>
<tr class="even">
<td><strong>Macro avg F1-score</strong></td>
<td>0.53</td>
<td>0.51</td>
<td>0.54</td>
<td>0.52</td>
</tr>
<tr class="odd">
<td><strong>Weighted avg F1</strong></td>
<td>0.66</td>
<td>0.66</td>
<td>0.65</td>
<td>0.70</td>
</tr>
</tbody>
</table>
<p>The XGBoost (Tuned) model is the best choice based on its highest accuracy (74%) and superior performance for Class 0 (High Trust in Healthcare), with a strong recall of 90%. While it still struggles with Class 1 (Low Trust in Healthcare), the improved overall performance makes it the most reliable model for the task at hand.</p>


</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Ii8vIEltcG9ydCBuZWNlc3NhcnkgbGlicmFyaWVzXG5kMyA9IHJlcXVpcmUoXCJkM1wiKTtcblxuLy8gRnVuY3Rpb24gdG8gbG9hZCBhbmQgdXNlIHRoZSBkYXRhIGRpcmVjdGx5IHBhc3NlZCBmcm9tIFB5dGhvblxuYXN5bmMgZnVuY3Rpb24gbG9hZERhdGEoKSB7XG4gIHRyeSB7XG4gICAgLy8gQWNjZXNzIHRoZSBkYXRhIGluamVjdGVkIGJ5IFB5dGhvbiAodmlhIHdpbmRvdy5kZl9kYXRhKVxuICAgIGNvbnN0IGRhdCA9IHdpbmRvdy5kZl9kYXRhO1xuXG4gICAgLy8gTG9nIHRoZSBkYXRhIHRvIHZlcmlmeSBpdCdzIGxvYWRlZCBjb3JyZWN0bHlcbiAgICBjb25zb2xlLmxvZyhkYXQpO1xuXG4gICAgLy8gQ2FsbCB0aGUgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBwYXJhbGxlbCBjb29yZGluYXRlcyBwbG90XG4gICAgY3JlYXRlUGFyYWxsZWxDb29yZGluYXRlc1Bsb3QoZGF0LCBbJ0FjY3VyYWN5JywgJ0NsYXNzIDMgUHJlY2lzaW9uJywgJ0NsYXNzIDQgUHJlY2lzaW9uJywgJ0NsYXNzIDMgUmVjYWxsJywgJ0NsYXNzIDQgUmVjYWxsJ10sIDIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIGRhdGE6XCIsIGVycm9yKTtcbiAgfVxufVxuXG4vLyBGdW5jdGlvbiB0byBjcmVhdGUgdGhlIHBhcmFsbGVsIGNvb3JkaW5hdGVzIHBsb3RcbmZ1bmN0aW9uIGNyZWF0ZVBhcmFsbGVsQ29vcmRpbmF0ZXNQbG90KGRhdGEsIGF0dHJpYnV0ZXMsIG51bVRpY2tzKSB7XG4gIGNvbnN0IHdpZHRoID0gODAwLCBoZWlnaHQgPSAzNTA7XG5cbiAgLy8gU2V0dXAgaG92ZXIgZWZmZWN0IGZvciBwb2ludHNcbiAgY29uc3QgaG92ZXIgPSB2bC5zZWxlY3RTaW5nbGUoKS5vbihcIm1vdXNlb3ZlclwiKS5uZWFyZXN0KHRydWUpLmVtcHR5KFwibm9uZVwiKTtcblxuICAvLyBEZWZpbmUgdGhlIGJhc2UgbGF5ZXIgd2l0aCBydWxlcyBmb3IgdGhlIHBhcmFsbGVsIGNvb3JkaW5hdGVzIHBsb3RcbiAgY29uc3QgYmFzZSA9IHZsLm1hcmtSdWxlKHsgY29sb3I6IFwiI2NjY1wiIH0pLmVuY29kZShcbiAgICB2bC54KCkuZmllbGROKFwia2V5XCIpLnNvcnQoYXR0cmlidXRlcyksXG4gICAgdmwuZGV0YWlsKCkuY291bnQoKVxuICApO1xuXG4gIC8vIERlZmluZSB0aGUgbGluZSBsYXllciB3aXRoIGNvbG9yIGVuY29kaW5nIGJhc2VkIG9uIE1vZGVsXG4gIGNvbnN0IGxpbmUgPSBiYXNlLm1hcmtMaW5lKCkuZW5jb2RlKFxuICAgIHZsLmNvbG9yKCkuZmllbGROKFwiTW9kZWxcIikuc2NhbGUoe1xuICAgICAgZG9tYWluOiBbJ1N0YW5kYXJkIFhHQm9vc3QnLCAnQ2xhc3MgSW1iYWxhbmNlIFhHQm9vc3QgKFNNT1RFKScsICdUdW5lZCBYR0Jvb3N0JywgJ1JhbmRvbSBGb3Jlc3QnXSxcbiAgICAgIHJhbmdlOiBbJyNmZjQ1MDAnLCAnI2ZmYTIwNScsICcjZDQwNjM3JywgJyM1ZjA5MjInXVxuICAgIH0pLFxuICAgIHZsLmRldGFpbCgpLmZpZWxkTihcImluZGV4XCIpLFxuICAgIHZsLm9wYWNpdHkoKS5pZihob3ZlciwgdmwudmFsdWUoMSkpLnZhbHVlKDAuMyksXG4gICAgdmwueSgpLmZpZWxkUShcIm5vcm1fdmFsXCIpLmF4aXMobnVsbCksXG4gICAgdmwudG9vbHRpcChbJ01vZGVsJywgLi4uYXR0cmlidXRlc10pXG4gICk7XG5cbiAgLy8gRGVmaW5lIHRoZSBwb2ludHMgbGF5ZXIgZm9yIHRoZSBjaGFydCwgd2l0aCBob3ZlciBzaXplIGNoYW5nZXNcbiAgY29uc3QgcG9pbnRzID0gbGluZS5tYXJrQ2lyY2xlKCkuc2VsZWN0KGhvdmVyKS5lbmNvZGUodmwuc2l6ZSgpLmlmKGhvdmVyLCB2bC52YWx1ZSg1MCkpLnZhbHVlKDUpKTtcblxuICAvLyBEZWZpbmUgYSBmdW5jdGlvbiB0byBjcmVhdGUgdGljayBtYXJrc1xuICBjb25zdCB0aWNrID0geTAgPT4gdmwubGF5ZXIoXG4gICAgYmFzZS5tYXJrVGV4dCh7IHN0eWxlOiBcImxhYmVsXCIgfSkuZW5jb2RlKHZsLnRleHQoKS5tYXgoXCJtYXhcIikpLFxuICAgIGJhc2UubWFya1RpY2soeyBzdHlsZTogXCJ0aWNrXCIsIHNpemU6IDgsIGNvbG9yOiBcIiNjY2NcIiB9KVxuICApLmVuY29kZSh2bC55KCkudmFsdWUoeTApKTtcblxuICAvLyBSZXR1cm4gdGhlIGZ1bGwgdmlzdWFsaXphdGlvbiB3aXRoIHRoZSBsYXllcnMgYW5kIHRyYW5zZm9ybWF0aW9uc1xuICByZXR1cm4gdmwubGF5ZXIoYmFzZSwgbGluZSwgcG9pbnRzLCAuLi5BcnJheS5mcm9tKHsgbGVuZ3RoOiBudW1UaWNrcyB9KS5tYXAoKF8sIGkpID0+IHRpY2soKGhlaWdodCAvIChudW1UaWNrcyAtIDEpKSAqIGkpKSlcbiAgICAuZGF0YShkYXRhKVxuICAgIC50cmFuc2Zvcm0oXG4gICAgICB2bC5maWx0ZXIoYXR0cmlidXRlcy5tYXAoYSA9PiBgZGF0dW1bXCIke2F9XCJdICE9IG51bGxgKS5qb2luKFwiICYmIFwiKSksXG4gICAgICB2bC53aW5kb3codmwuY291bnQoKS5hcyhcImluZGV4XCIpKSxcbiAgICAgIHZsLmZvbGQoYXR0cmlidXRlcyksXG4gICAgICB2bC5ncm91cGJ5KFwia2V5XCIpLmpvaW5hZ2dyZWdhdGUodmwubWluKFwidmFsdWVcIikuYXMoXCJtaW5cIiksIHZsLm1heChcInZhbHVlXCIpLmFzKFwibWF4XCIpKSxcbiAgICAgIHZsLmNhbGN1bGF0ZShcIihkYXR1bS52YWx1ZSAtIGRhdHVtLm1pbikgLyAoZGF0dW0ubWF4IC0gZGF0dW0ubWluKVwiKS5hcyhcIm5vcm1fdmFsXCIpLFxuICAgICAgdmwuY2FsY3VsYXRlKFwiKGRhdHVtLm1pbiArIGRhdHVtLm1heCkgLyAyXCIpLmFzKFwibWlkXCIpXG4gICAgKVxuICAgIC5jb25maWcoe1xuICAgICAgYXhpc1g6IHsgZG9tYWluOiBmYWxzZSwgbGFiZWxBbmdsZTogMCwgdGlja0NvbG9yOiBcIiNjY2NcIiwgdGl0bGU6IG51bGwgfSxcbiAgICAgIHZpZXc6IHsgc3Ryb2tlOiBudWxsIH0sXG4gICAgICBzdHlsZToge1xuICAgICAgICBsYWJlbDogeyBiYXNlbGluZTogXCJtaWRkbGVcIiwgYWxpZ246IFwicmlnaHRcIiwgZHg6IC01IH0sXG4gICAgICAgIHRpY2s6IHsgb3JpZW50OiBcImhvcml6b250YWxcIiB9XG4gICAgICB9XG4gICAgfSlcbiAgICAud2lkdGgod2lkdGggLSAxMDApXG4gICAgLmhlaWdodChoZWlnaHQpXG4gICAgLnRpdGxlKHtcbiAgICAgIHRleHQ6ICdNb2RlbCBQZXJmb3JtYW5jZSBDb21wYXJpc29uJyxcbiAgICAgIGZvbnRTaXplOiAxMixcbiAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAgICAgIGFuY2hvcjogJ21pZGRsZScsXG4gICAgICBjb2xvcjogJ2JsYWNrJyxcbiAgICAgIGZvbnQ6ICdzYW5zLXNlcmlmJyxcbiAgICAgIG9mZnNldDogNDBcbiAgICB9KTtcbn1cblxuLy8gSW5pdGlhdGUgdGhlIHByb2Nlc3MgdG8gbG9hZCBkYXRhIGFuZCBjcmVhdGUgdGhlIGNoYXJ0XG5sb2FkRGF0YSgpO1xuXG5cbiJ9XX0=
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Content <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> 2023 by [Project Team 1] <br> All content licensed under a <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> <i class="fa-brands fa-creative-commons-by" aria-label="creative-commons-by"></i> <i class="fa-brands fa-creative-commons-nc" aria-label="creative-commons-nc"></i> <a href="https://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International license (CC BY-NC 4.0)</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Made with <i class="fa-brands fa-r-project" aria-label="r-project"></i> and <a href="https://quarto.org/">Quarto</a><br> <a href="https://github.com/anly503/lab-2.1">View the source at <i class="fa-brands fa-github" aria-label="github"></i> GitHub</a></p>
</div>
  </div>
</footer>




</body></html>